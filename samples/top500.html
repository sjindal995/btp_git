<!-- START SIGMA IMPORTS -->

<script src="../linkurious/src/sigma.core.js"></script>
<script src="../linkurious/src/conrad.js"></script>
<script src="../linkurious/src/utils/sigma.utils.js"></script>
<script src="../linkurious/src/utils/sigma.polyfills.js"></script>
<script src="../linkurious/src/sigma.settings.js"></script>
<script src="../linkurious/src/classes/sigma.classes.dispatcher.js"></script>
<script src="../linkurious/src/classes/sigma.classes.configurable.js"></script>
<script src="../linkurious/src/classes/sigma.classes.graph.js"></script>
<script src="../linkurious/src/classes/sigma.classes.camera.js"></script>
<script src="../linkurious/src/classes/sigma.classes.quad.js"></script>
<script src="../linkurious/src/captors/sigma.captors.mouse.js"></script>
<script src="../linkurious/src/captors/sigma.captors.touch.js"></script>
<script src="../linkurious/src/renderers/sigma.renderers.canvas.js"></script>
<script src="../linkurious/src/renderers/sigma.renderers.webgl.js"></script>
<script src="../linkurious/src/renderers/sigma.renderers.svg.js"></script>
<script src="../linkurious/src/renderers/sigma.renderers.def.js"></script>
<script src="../linkurious/src/renderers/webgl/sigma.webgl.nodes.def.js"></script>
<script src="../linkurious/src/renderers/webgl/sigma.webgl.nodes.fast.js"></script>
<script src="../linkurious/src/renderers/webgl/sigma.webgl.edges.def.js"></script>
<script src="../linkurious/src/renderers/webgl/sigma.webgl.edges.fast.js"></script>
<script src="../linkurious/src/renderers/webgl/sigma.webgl.edges.arrow.js"></script>
<script src="../linkurious/src/renderers/canvas/sigma.canvas.labels.def.js"></script>
<script src="../linkurious/src/renderers/canvas/sigma.canvas.hovers.def.js"></script>
<script src="../linkurious/src/renderers/canvas/sigma.canvas.nodes.def.js"></script>
<script src="../linkurious/src/renderers/canvas/sigma.canvas.edges.def.js"></script>
<script src="../linkurious/src/renderers/canvas/sigma.canvas.edges.curve.js"></script>
<script src="../linkurious/src/renderers/canvas/sigma.canvas.edges.arrow.js"></script>
<script src="../linkurious/src/renderers/canvas/sigma.canvas.edges.curvedArrow.js"></script>
<script src="../linkurious/src/renderers/canvas/sigma.canvas.edgehovers.def.js"></script>
<script src="../linkurious/src/renderers/canvas/sigma.canvas.edgehovers.curve.js"></script>
<script src="../linkurious/src/renderers/canvas/sigma.canvas.edgehovers.arrow.js"></script>
<script src="../linkurious/src/renderers/canvas/sigma.canvas.edgehovers.curvedArrow.js"></script>
<script src="../linkurious/src/renderers/canvas/sigma.canvas.extremities.def.js"></script>
<script src="../linkurious/src/renderers/svg/sigma.svg.utils.js"></script>
<script src="../linkurious/src/renderers/svg/sigma.svg.nodes.def.js"></script>
<script src="../linkurious/src/renderers/svg/sigma.svg.edges.def.js"></script>
<script src="../linkurious/src/renderers/svg/sigma.svg.edges.curve.js"></script>
<script src="../linkurious/src/renderers/svg/sigma.svg.edges.curvedArrow.js"></script>
<script src="../linkurious/src/renderers/svg/sigma.svg.labels.def.js"></script>
<script src="../linkurious/src/renderers/svg/sigma.svg.hovers.def.js"></script>
<script src="../linkurious/src/middlewares/sigma.middlewares.rescale.js"></script>
<script src="../linkurious/src/middlewares/sigma.middlewares.copy.js"></script>
<script src="../linkurious/src/misc/sigma.misc.animation.js"></script>
<script src="../linkurious/src/misc/sigma.misc.bindEvents.js"></script>
<script src="../linkurious/src/misc/sigma.misc.bindDOMEvents.js"></script>
<script src="../linkurious/src/misc/sigma.misc.drawHovers.js"></script>
<!-- END SIGMA IMPORTS -->

<script src="../linkurious/plugins/sigma.parsers.json/sigma.parsers.json.js"></script>
<script src="../linkurious/plugins/sigma.exporters.json/sigma.exporters.json.js"></script>

<script src="../linkurious/plugins/sigma.parsers.cypher/sigma.parsers.cypher.js"></script>

<script src="../linkurious/plugins/sigma.plugins.animate/sigma.plugins.animate.js"></script>

<script src="../linkurious/plugins/sigma.layouts.forceLink/worker.js"></script>
<script src="../linkurious/plugins/sigma.layouts.forceLink/supervisor.js"></script>

<script src="../linkurious/plugins/sigma.plugins.dragNodes/sigma.plugins.dragNodes.js"></script>

<script src="../linkurious/plugins/sigma.helpers.graph/sigma.helpers.graph.js"></script>

<script src="../linkurious/plugins/sigma.plugins.activeState/sigma.plugins.activeState.js"></script>

<script src="../linkurious/plugins/sigma.plugins.select/sigma.plugins.select.js"></script>

<script src="../linkurious/plugins/sigma.plugins.keyboard/sigma.plugins.keyboard.js"></script>
<!-- <script src="../linkurious/plugins/sigma.layouts.noverlap/sigma.layouts.noverlap.js"></script>
 -->
<!-- <script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.hovers.def.js"></script> -->
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.nodes.def.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.nodes.cross.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.nodes.diamond.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.nodes.equilateral.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.nodes.square.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.nodes.star.js"></script>

<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edges.def.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edges.curve.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edges.arrow.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edges.curvedArrow.js"></script>

<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edgehovers.arrow.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edgehovers.curve.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edgehovers.curvedArrow.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edgehovers.dashed.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edgehovers.def.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edgehovers.dotted.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edgehovers.parallel.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edgehovers.tapered.js"></script>

<!-- <script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.hovers.def.js"></script> -->

<script src="../linkurious/plugins/sigma.renderers.customEdgeShapes/sigma.canvas.edgehovers.dashed.js"></script>
<script src="../linkurious/plugins/sigma.renderers.customEdgeShapes/sigma.canvas.edgehovers.dotted.js"></script>
<script src="../linkurious/plugins/sigma.renderers.customEdgeShapes/sigma.canvas.edgehovers.parallel.js"></script>
<script src="../linkurious/plugins/sigma.renderers.customEdgeShapes/sigma.canvas.edgehovers.tapered.js"></script>
<script src="../linkurious/plugins/sigma.renderers.customEdgeShapes/sigma.canvas.edges.dashed.js"></script>
<script src="../linkurious/plugins/sigma.renderers.customEdgeShapes/sigma.canvas.edges.dotted.js"></script>
<script src="../linkurious/plugins/sigma.renderers.customEdgeShapes/sigma.canvas.edges.parallel.js"></script>
<script src="../linkurious/plugins/sigma.renderers.customEdgeShapes/sigma.canvas.edges.tapered.js"></script>

<script src="../linkurious/plugins/sigma.plugins.legend/sigma.plugins.legend.js"></script>
<script src="../linkurious/plugins/sigma.plugins.design/sigma.plugins.design.js"></script>

<script src="../linkurious/plugins/sigma.renderers.edgeLabels/settings.js"></script>
<script src="../linkurious/plugins/sigma.renderers.edgeLabels/sigma.canvas.edges.labels.def.js"></script>
<script src="../linkurious/plugins/sigma.renderers.edgeLabels/sigma.canvas.edges.labels.curve.js"></script>
<script src="../linkurious/plugins/sigma.renderers.edgeLabels/sigma.canvas.edges.labels.curvedArrow.js"></script>

<script src="../linkurious/plugins/sigma.renderers.linkurious/settings.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.labels.def.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.hovers.def.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edgehovers.def.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edgehovers.curve.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edgehovers.arrow.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edgehovers.curvedArrow.js"></script>
<script src="../linkurious/plugins/sigma.renderers.linkurious/canvas/sigma.canvas.edges.autoCurve.js"></script>
<script src="../linkurious/plugins/sigma.plugins.animate/sigma.plugins.animate.js"></script>
<script src="../linkurious/plugins/sigma.layouts.dagre/sigma.layout.dagre.js"></script>
<script src="lib/dagre.js"></script>
<script src="../linkurious/plugins/sigma.layouts.fruchtermanReingold/sigma.layout.fruchtermanReingold.js"></script>

<script src="../linkurious/plugins/sigma.plugins.animate/sigma.plugins.animate.js"></script>
<script src="../linkurious/plugins/sigma.layouts.noverlap/sigma.layouts.noverlap.js"></script>

<!-- top companies -->


<!-- HTML page to be displayed -->
<div id="container">
    <style>
        #graph-container {
            top: 40;
            bottom: 0;
            left: 0;
            right: 0;
            position: absolute;
            transition: 0.5s;
        }
        #control-panel {
            top: 10px;
            bottom: 10px;
            right: 10px;
            position: absolute;
            width: 230px;
            background-color: rgb(249, 247, 237);
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }
        #control-panel > div {
            margin: 10px;
            overflow-x: auto;
        }
        .line {
            clear: both;
            display: block;
            width: 100%;
            margin: 0;
            padding: 12px 0 0 0;
            border-bottom: 1px solid #aac789;
            background: transparent;
        }
        h2, h3, h4 {
            padding: 0;
            font-variant: small-caps;
            font-family: 'Tahoma';
        }
        p {
            font-family: 'Tahoma';
        }   
        .green {
            color: #437356;
        }
        h4.underline {
            color: #437356;
            background: #f4f0e4;
            margin: 0;
            border-radius: 2px;
            padding: 8px 12px;
            font-weight: 700;
        }
        .hidden {
            display: none;
            visibility: hidden;
        }
    </style>
    <div id="graph-container">    </div>
     <div id="control-panel" >
        <h4 class="underline">INFORMATION PANEL</h4>
        <br>
        <!-- <button id="hide-ind">Hide Industries</button>
        <button id="hide-ppl">Hide People</button> -->
        <h4 id="f1-label"></h4><p id="field1"></p>
        <h4 id="f2-label"></h4><p id="field2"></p>
        <h4 id="f3-label"></h4><p id="field3"></p>
        <h4 id="f4-label"></h4><p id="field4"></p>
        <h4 id="f5-label"></h4><p id="field5"></p>
        <div>
        </div>
    
    </div>
    <a href = "/samples/"><button type = "home" id="btn1">Home</button></a>
    <button id="btn">Download JSON</button>
    <button id="hide">Hide Panel</button>
    <input type="radio" name="radio_btn" id="sub" value="Subsidiary" checked="checked"/>Subsidiary
    <input type="radio" name="radio_btn" id="sub_i" value="Subsidiary+Investment"/>Subsidiary+Investment
    <input type="radio" name="radio_btn" id="sub_p" value="Subsidiary+People"/>Subsidiary+People
    <input type="radio" name="radio_btn" id="sub_i_p" value="Subsidiary+Investment+People"/>Subsidiary+Investment+People
    <input  type="submit" id="submit_btn" name="submit" value="Submit" onclick="submitForm()">
</div>

<script type="application/javascript">


//the list of top 500 companies
topcomps = ["Indian Oil Corporati",
"Indian Oil Corporation Ltd",
"Reliance Industries Ltd",
"Bharat Petroleum Cor",
"Bharat Petroleum Corporation Ltd",
"Hindustan Petroleum Corporation Ltd",
"Sbi Dfhi Ltd",
"State Bank Of India",
"Food Corporation Of India",
"Idbi Gilts Ltd(Merged)",
"Essar Oil Ltd",
"Tata Consultancy Services Ltd",
"Tata Consultancy Ser",
"Oil & Natural Gas Corpn Ltd",
"Ntpc Ltd",
"Maruti Suzuki",
"Maruti Suzuki India Ltd",
"Maruti Suzuki India",
"Larsen & Toubro Ltd",
"Bharti Airtel",
"Bharti Airtel Ltd",
"Hdfc Bank Ltd",
"Advantage Overseas Pvt Ltd",
"Bunge India Pvt Ltd",
"Infosys Ltd",
"Icici Bank Ltd",
"Gail (India) Ltd",
"Itc Ltd",
"Mangalore Refinery A",
"Mangalore Refinery And Petrochemicals Ltd",
"Punjab National Bank",
"Maharashtra State Electricity Distribution Co Ltd",
"Wipro Ltd",
"Bank Of Baroda",
"Canara Bank",
"Steel Authority Of India Ltd",
"Mahindra & Mahindra Ltd",
"Tata Steel Ltd",
"Tata Steel",
"Bank Of India",
"Samsung India Electronics Ltd",
"Axis Bank",
"Axis Bank Ltd",
"Jsw Steel Ltd",
"Rajesh Exports Ltd",
"Rajesh Exports",
"Hindalco",
"Hindalco Industries",
"Hindalco Industries Ltd",
"Idea Cellular Ltd",
"Chennai Petroleum Co",
"Chennai Petroleu",
"Chennai Petroleum Corporation Ltd",
"Hindustan Unilever Ltd",
"Gujarat Urja Vikas Nigam Ltd",
"Union Bank Of India",
"Vedanta Ltd",
"Housing Development Finance Corporation Ltd",
"Hero Motocorp Ltd",
"M D Overseas Ltd",
"Reliance Petroleum Ltd (Merged)",
"Reliance Petrole",
"Hyundai Motor India Ltd",
"Bharat Oman Refineries Ltd",
"Bharat Oman Refineri",
"Idbi Bank Ltd",
"Ruchi Soya Industrie",
"Ruchi Soya",
"Ruchi Soya Industries Ltd",
"Power Finance Corporation Ltd",
"Power Fin Corpn",
"Power Finance Corpor",
"Ultratech Cement Ltd",
"Bharat Sanchar",
"Bharat Sanchar Nigam Ltd",
"Petronet Lng Ltd",
"Bharat Heavy Electricals Ltd",
"Uttar Pradesh Power Corporation Ltd",
"Central Bank Of India",
"South Eastern Coalfields Ltd",
"Tamilnadu State Marketing Corporation Ltd",
"Bajaj Auto Ltd",
"Rural Electrificatio",
"Rural Electrification Corporation",
"Rural Electrification",
"Rural Electrification Corporation Ltd",
"Indian Overseas Bank",
"Indian Overseas",
"Syndicate Bank",
"Riddisiddhi Bullions Ltd",
"Mrf Ltd",
"United Spirits Ltd",
"United Spirits",
"Tech Mahindra Ltd",
"Indian Farmers Fertilizer Cooperative Ltd",
"Icici Prudential Life Insurance Company Ltd",
"Ibm India Pvt Ltd",
"Power Grid Corporati",
"Power Grid Corpn",
"Power Grid Corporation Of India Ltd",
"Cognizant Technology Solutions India Pvt Ltd",
"Cognizant Technology",
"National Bank For Agriculture & Rural Development",
"Ashok Leyland Ltd",
"Jet Airways (India) Ltd",
"Jet Airways (India)",
"Jet Airways",
"Sterlite Industries (India) Ltd",
"Sterlite Industries (India) Ltd(Merged)",
"Sterlite Industries",
"Oriental Bank",
"Oriental Bank Of Commerce",
"GOI",
"Corporation Bank",
"Honda Motorcycle & Scooter India Pvt Ltd",
"Maharashtra State Power Generation Company Ltd",
"Allahabad Bank",
"Uco Bank",
"Air India Ltd",
"Toyota Kirloskar Mot",
"Toyota Kirloskar Motor Ltd",
"Adani Wilmar Ltd",
"Andhra Bank",
"Ingram Micro India Ltd",
"Edelweiss Commodities Services Ltd",
"Kotak Mahindra Bank",
"Kotak Mahindra Bank Ltd",
"Indian Bank",
"Reliance Retail Ltd",
"Interglobe Aviation",
"Interglobe Aviat",
"Interglobe Aviation Ltd",
"Vodafone South Ltd",
"Mahanadi Coalfields Ltd",
"Mahanadi Coalfields",
"Ibp Co. Ltd(Merged)",
"Hindustan Aeronautics Ltd",
"Hindustan Aeronautic",
"Indian Potash",
"Indian Potash Ltd",
"Hindustan Zinc Ltd",
"Kochi Refineries",
"Kochi Refineries Ltd(Merged)",
"Essar Steel Ltd",
"Indus Towers",
"Indus Towers Ltd",
"Asian Paints Ltd",
"Honda Cars India Ltd",
"Zaveri & Co Pvt Ltd",
"Lg Electronics India Pvt Ltd",
"Jindal Steel & Power",
"Jindal Steel & Power Ltd",
"State Bank Of Hyderabad",
"Eastern Coalfields Ltd",
"General Insurance Co",
"General Insurance Corporation Of India",
"Yes Bank Ltd",
"Yes Bank",
"Bangalore Electricity Supply Company",
"Hcl Technologies Ltd",
"Northern Coalfields Ltd",
"Northern Coalfields",
"Ford India Pvt Ltd",
"Acc Ltd",
"Hewlett-Packard India Sales Pvt Ltd",
"Bhushan Steel Ltd",
"Bank Of Maharashtra",
"Renault Nissan Automotive India Pvt Ltd",
"Frost International",
"Frost International Ltd",
"Videocon Industries",
"Videocon Industries Ltd",
"Ptc India Ltd",
"Adani Power Ltd",
"Redington India",
"Redington India Ltd",
"Lic Housing Finance Ltd",
"Singareni Collieries Company Ltd",
"Indian Petrochemical",
"Indian Petrochemicals Corporation Ltd(Merged)",
"Tvs Motor Company Ltd",
"Cipla Ltd",
"Jsw Ispat Steel Ltd(Merged)",
"Vijaya Bank",
"Central Coalfields Ltd",
"Alok Industries Ltd",
"Damodar Valley Corporation",
"Future Value Retail Ltd",
"Future Value",
"Torrent Power Ltd",
"Coromandel Inter",
"Coromandel International Ltd",
"Coromandel Internati",
"Indusind Bank Ltd",
"Andhra Pradesh Power Generation Corporation Ltd",
"Bosch Ltd",
"Lupin Ltd",
"Rotomac Global Pvt Ltd",
"Titan Company Ltd",
"Bharat Coking Coal Ltd",
"New India Assurance Company Ltd",
"Reliance Communications Ltd",
"Tata Chemicals",
"Tata Chemicals Ltd",
"Siemens Ltd",
"Numaligarh Refinery Ltd",
"Numaligarh Refinery",
"Ambuja Cements Ltd",
"Citibank N. A.",
"Dena Bank",
"Western Coalfields Ltd",
"Allanasons Ltd",
"Gujarat State Petrol",
"Gujarat State Petroleum Corporation Ltd",
"Gujarat State Petr",
"Dakshin Gujarat Vij Company Ltd",
"State Trading Corporation Of India Ltd",
"State Trading Corpor",
"State Trading Co",
"Tata Teleservices Ltd",
"Micromax Informatics",
"Micromax Informatics Ltd",
"Rashtriya Ispat Nigam Ltd",
"State Bank Of Patiala",
"Dr Reddys Laborator",
"Dr Reddys Laboratories Ltd",
"Shriram Transport Finance",
"Shriram Transport Finance Company Ltd",
"Shriram Transport Fi",
"Paschim Gujarat Vij Company Ltd",
"Bhushan Power & Steel Ltd",
"Reliance Infrastructure Ltd",
"Sony India Pvt Ltd",
"Standard Chartered Bank",
"United Bank Of India",
"United Bank",
"Grasim Industries Ltd",
"Gujarat Co-Operative Milk Marketing Federation Ltd",
"Oil India Ltd",
"Oil India",
"Apollo Tyres Ltd",
"State Bank Of Travancore",
"State Bank Of Bikaner And Jaipur",
"State Bank",
"Chambal Fert",
"Chambal Fertilisers & Chemicals Ltd",
"Chambal Fertilisers",
"Flipkart India Pvt Ltd",
"Aurobindo Pharma",
"Aurobindo Pharma Ltd",
"Jaiprakash Assoc",
"Jaiprakash Associates Ltd",
"Jaiprakash Associate",
"Icici Ltd (Merged)",
"United Breweries Ltd",
"Haldia Petrochemicals Ltd",
"Mahindra Vehicles Ma",
"Mahindra Vehicles Manufacturers Ltd",
"Nuclear Power Corporation",
"Hindustan Coca-Cola Beverages Pvt Ltd",
"Airports Authority Of India",
"Indiabulls Housing",
"Indiabulls Housing F",
"Indiabulls Housing Finance Ltd",
"Tata Power Company Ltd",
"Tata Power",
"United India Insurance Company Ltd",
"Rashtriya Chemicals",
"Rashtriya Chemicals & Fertilizers Ltd",
"Rajasthan Rajya Vidyut Utpadan Nigam Ltd",
"Century Textiles",
"Century Textiles & Industries Ltd",
"Century Textiles & I",
"Future Retail Ltd",
"Godrej & Boyce Manufacturing Company Ltd",
"Punjab & Sind Bank",
"Pernod Ricard India Pvt Ltd",
"Agrilink Asia Pvt Ltd",
"National Insurance Company Ltd",
"Abb India Ltd",
"Gitanjali Gems Ltd",
"Gitanjali Gems",
"Bses Rajdhani Power Ltd",
"Reliance Infratel Ltd",
"Nestle India Ltd",
"Nestle India",
"Hongkong & Shanghai Banking Corporation Ltd",
"Banking Corporation Ltd",
"Uttar Haryana",
"Uttar Haryana Bijli Vitran Nigam Ltd",
"Air India Ltd(Merged)",
"Nokia Solutions & Network India Pvt Ltd",
"Punjab State Civil Supplies Corpn Ltd",
"Vodafone Cellular Ltd",
"Gujarat State Electricity Corporation Ltd",
"Hpcl-Mittal Energy Ltd",
"Ericsson India Pvt Ltd",
"Ncc Ltd",
"Export-Import Bank Of India",
"Uttar Pradesh Rajya Vidyut Utpadan Nigam Ltd",
"Ushdev International Ltd",
"Ushdev International",
"Pepsico India Holdings Pvt Ltd",
"Britannia Industries",
"Britannia Industries Ltd",
"Uttar Gujarat Vij Company Ltd",
"Adani Enterprise",
"Adani Enterprises Ltd",
"Tata Sons Ltd",
"Tata Sons",
"Volkswagen Group Sales India Pvt Ltd",
"West Bengal Power Devp. Corpn. Ltd",
"National Fertilizer Ltd",
"National Fertilizer",
"Adani Power Maharash",
"Adani Power Maharashtra Ltd",
"Sun Pharmaceuticals Industries Ltd",
"Federal Bank",
"Federal Bank Ltd",
"Exide Industries Ltd",
"Exide Industries",
"Bharat Electron",
"Bharat Electronics Ltd",
"Amrapali Industries",
"Amrapali Industries Ltd",
"West Bengal State Electricity Distribution Co Ltd",
"Indian Railway Finance Corporation Ltd",
"Indian Railway Finance Corporation",
"Tipsons Financial Services Pvt Ltd",
"Bajaj Allianz Life Insurance Company Ltd",
"Bajaj Allianz Life I",
"Reliance Corporate It Park Ltd",
"Bajaj Fin.",
"Bajaj Finance Ltd",
"Dewan Housing",
"Dewan Housing Finance Corporation Ltd",
"Dewan Housing Financ",
"National Aluminium Company Ltd",
"Bharti Retail Ltd",
"Pc Jeweller Ltd",
"Uttam Galva Steels Ltd",
"Ongc Videsh Ltd",
"Cadila Healthcare Ltd",
"L&T Hydrocarbon Engineering Ltd",
"State Bank Of Mysore",
"Jindal Stainless (Hisar) Ltd",
"Jindal Stainless",
"Haryana Power",
"Haryana Power Genera",
"Haryana Power Generation Corporation Ltd",
"Dell India Pvt Ltd",
"Mylan Laboratories Ltd",
"Eicher Motors",
"Eicher Motors Ltd",
"Madhya Pradesh Paschim Kshetra Vidyut Vitaran Co L",
"Mother Dairy Fruit & Vegetables Ltd",
"Mother Dairy Fruit &",
"Mother Dairy Fruit",
"Ranbaxy Laboratories Ltd",
"Ranbaxy Laboratories Ltd (Merged)",
"Ranbaxy Laboratories",
"Jaipur Vidyut Vitran Nigam Ltd",
"T V Sundram Iyengar & Sons Ltd",
"Jindal Saw",
"Jindal Saw Ltd",
"Mcc Pta India Corporation Pvt Ltd",
"Jammu And Kashmir Bank Ltd",
"Dakshin Haryana Bijli Vitran Nigam Ltd",
"Dakshin Haryana",
"Volkswagen India Pvt Ltd",
"Tata Power Delhi Dis",
"Tata Power Delhi Distribution Ltd",
"Cargill India Private Ltd",
"Parle Biscuits Pvt Ltd",
"Neyveli Lignite Corporation Ltd",
"K E C International Ltd",
"Karnataka Power Corporation Ltd",
"Bongaigaon Refin",
"Bongaigaon Refinery",
"Bongaigaon Refinery & Petrochemicals Ltd(Merged)",
"Jk Tyre & Industries Ltd",
"Southern Power Distribution Company Of Ap Ltd",
"Mondelez India Foods",
"Mondelez India Foods Ltd",
"Cesc Ltd",
"Jindal Stainless Ltd",
"Nmdc Ltd",
"NMDC",
"Vodafone Digilink Ltd",
"Avenue Super Marts Pvt Ltd",
"Philips Electronics India Ltd",
"Philips India",
"Philips India Ltd",
"Gujarat State Fertilizers & Chemicals Ltd",
"Gujarat State Fertil",
"Glenmark Pharmaceuticals Ltd",
"Glenmark Pharmaceuti",
"Procter & Gamble Home Products Ltd",
"Procter & Gamble Hom",
"Upl Ltd",
"Oracle India Pvt Ltd",
"Pec Ltd",
"Gujarat Gas Ltd",
"Shree Cement",
"Shree Cement Ltd",
"Gammon India Ltd",
"Ceat Ltd",
"CEAT",
"Havells India",
"Havells India Ltd",
"Punjab State Power Corporation Ltd",
"Cargill Global Trading India Pvt Ltd",
"Aditya Birla Fashion & Retail Ltd",
"Eastern Power Distribution Company Of A P Ltd",
"Coastal Gujarat Powe",
"Coastal Gujarat Power Ltd",
"Dcm Shriram Ltd",
"Prism Cement Ltd",
"Prism Cement",
"Shree Renuka Sugars",
"Shree Renuka Sugars Ltd",
"Satyam Computer Serv",
"Satyam Computer",
"Satyam Computer Services Ltd(Merged)",
"Renault India Pvt Ltd",
"Jsw Energy Ltd",
"Oriental Insurance Company Ltd",
"Suzlon Energy Ltd",
"Suzlon Energy",
"Asian Colour Coated Ispat Ltd",
"Shakti Bhog Foods Ltd",
"Tractors & Farm Eq",
"Tractors & Farm",
"Tractors & Farm Equipment Ltd",
"Motherson Sumi Systems Ltd",
"Motherson Sumi Syste",
"Mahindra & Mahindra Financial Services Ltd",
"Lafarge India Pvt Ltd",
"Dabur India",
"Dabur India Ltd",
"National Buildings Construction Corporation Ltd",
"Simplex Infrastructures Ltd",
"Simplex Infra",
"Simplex Infrastr",
"Simplex Infrastructu",
"Indian Airlines Ltd(Merged)",
"Container Corpn.",
"Container Corporatio",
"Container Corporation Of India Ltd",
"Kwality Ltd",
"Small Industries Development Bank Of India Ltd",
"Small Industries Dev",
"Aditya Birla Nuv",
"Aditya Birla Nuvo Ltd",
"Johnson & Johnson Pvt Ltd",
"Bharti Infratel Ltd",
"Vardhman Textiles",
"Vardhman Textile",
"Vardhman Textiles Ltd",
"Larsen & Toubro Infotech Ltd",
"Larsen & Toubro",
"Larsen & Toubro Info",
"Savex Computers Ltd",
"Aircel Ltd",
"South Indian Bank Ltd",
"Kerala State Beverages Mfg & Marketing Corpn Ltd",
"Apar Industries Ltd",
"Suguna Foods Pvt Ltd",
"Karur Vysya Bank Ltd",
"Karur Vysya Bank",
"Torrent Pharmaceutic",
"Torrent Pharmaceuticals Ltd",
"Arvind Ltd",
"Apollo Hospitals",
"Apollo Hospitals Enterprise Ltd",
"Apollo Hospitals Ent",
"Cotton Corporation Of India Ltd",
"Jcb India Pvt Ltd",
"Nirma Ltd",
"West Bengal Infrastructure Dev. Finance Corp. Ltd",
"Lalithaa Jewellery Mart Pvt Ltd",
"Louis Dreyfus Commodities India Pvt Ltd",
"Bharat Aluminium Company Ltd",
"Bharat Aluminium Com",
"Zuari Agro Chemicals Ltd",
"John Deere India Pvt Ltd",
"Amara Raja Batt",
"Amara Raja Batteries",
"Amara Raja Batteries Ltd",
"Voltas Ltd",
"Dishnet Wireless Ltd",
"Dishnet Wireless",
"Ing Vysya Bank Ltd",
"SpiceJet",
"Spicejet Ltd",
"Bharti Hexacom Ltd",
"Capgemini India Pvt Ltd",
"Joyalukkas India Pvt Ltd",
"Basf India Ltd",
"Northern Power Distribution Co Of A P Ltd",
"Madhya Pradesh Madhya Kshetra Vidyur Vittaran Co L",
"Megha Engineering & Infrastructures Ltd",
"Godrej Consumer Prod",
"Godrej Consumer Products Ltd",
"Godrej Consumer",
"Cummins India Ltd",
"Cummins India",
"Krishak Bharati Co-Operative Ltd",
"Pidilite Industries Ltd",
"Pidilite Industries",
"Star India Pvt Ltd",
"Jain Irrigation",
"Jain Irrigation Syst",
"Jain Irrigation Systems Ltd",
"Nagarjuna Fertilizers & Chemicals Ltd (Merged)",
"Karnataka Bank Ltd",
"Karnataka Bank",
"Surya Vinayak Industries Ltd",
"Deutsche Bank",
"Mercedes-Benz India Pvt Ltd",
"Sintex Industries Ltd",
"Welspun India Ltd",
"Welspun India",
"Bajaj Hindusthan Sugar Ltd",
"Muthoot Finance Ltd",
"Madhya Gujarat Vij Company Ltd",
"Kalyan Jewellers India Pvt Ltd",
"Delhi International",
"Delhi International Airport Pvt Ltd",
"Viraj Profiles Ltd",
"Suguna Poultry Farm Ltd",
"Gujarat Narmada Vall",
"Gujarat Narmada Valley Fertilizers & Chemicals Ltd",
"Icici Lombard General Insurance Company Ltd",
"India Cements Ltd",
"Tata Communications Ltd",
"Weizmann Forex Ltd",
"Genpact India",
"Jodhpur Vidyut Vitran Nigam Ltd",
"Il&Fs Transportation Networks Ltd",
"Gspc Gas Company Ltd",
"Samruddhi Cement Ltd(Merged)",
"Glaxosmithkline Consumer Healthcare Ltd",
"Sasan Power Ltd",
"Bses Yamuna Power Ltd",
"Shapoorji Pallonji & Co. Ltd",
"Cairn India",
"Cairn India Ltd",
"Bajaj Electricals Ltd",
"Bajaj Electrical"]





// var numPpl = "230";
var numPpl = "550";

// Initialize sigma instance
var s = new sigma({
    renderer: {
        container: document.getElementById('graph-container'),
        type: 'canvas'
    },
    settings: {
        dragNodeStickiness: 0.01,
        defaultNodeBorderColor: '#000',
        defaultNodeHoverBorderColor: '#000',
        minEdgeSize: 0.5,
        maxEdgeSize: 3.0,
        minNodeSize: 5,
        maxNodeSize: 20,
        animationsTime: 5000,
        scalingMode: 'outside',
        sideMargin: 1,
        labelThreshold: 10,
        fontStyle: 'bold',
        edgeColor: 'default',
        defaultEdgeColor: '#000000',
        edgeLabelSizePowRatio: 1,
        edgeLabelThreshold: 5,
        enableEdgeHovering: true,
        edgeHoverColor: "edge",
        edgeHoverSizeRatio: 1,
        edgeHoverExtremities: true,
        imageThreshold: 0,
    }
});
    
    var salesvalmap ={};

    var _ = {
      $: function (id) {
        return document.getElementById(id);
      },


    };
    // Show and hide panel
    _.$('hide').onclick=function(){
        if(_.$('hide').textContent=="Hide Panel"){
            _.$('control-panel').style.visibility='hidden';
            _.$('hide').textContent="Show Panel";
        }
        else{
            _.$('control-panel').style.visibility='visible';
            _.$('hide').textContent="Hide Panel";

        }
    }

    industries=[]
    people=[];

    // Show or hide industry nodes in the graph
    // _.$('hide-ind').onclick=function(){
    //     if(_.$('hide-ind').textContent=="Hide Industries"){
    //         s.graph.nodes().forEach(function(n){
    //             if(n.neo4j_labels[0]=="Industry"){
    //                 n.hidden=true;
    //             }
    //         })
    //         s.refresh();
    //         _.$('hide-ind').textContent="Show Industries";
    //     }
    //     else{
    //         s.graph.nodes().forEach(function(n){
    //             if(n.neo4j_labels[0]=="Industry"){
    //                 n.hidden=false;
    //             }
    //         })
    //         s.refresh();
    //         _.$('hide-ind').textContent="Hide Industries";

    //     }
    // }

    // // Show or hide people nodes in the graph
    // _.$('hide-ppl').onclick=function(){
    //     if(_.$('hide-ppl').textContent=="Hide People"){
    //         s.graph.nodes().forEach(function(n){
    //             if(n.neo4j_labels[0]=="People"){
    //                 n.hidden=true;
    //             }
    //         })
    //         s.refresh();
    //         _.$('hide-ppl').textContent="Show People";
    //     }
    //     else{
    //         s.graph.nodes().forEach(function(n){
    //             if(n.neo4j_labels[0]=="People"){
    //                 n.hidden=false;
    //             }
    //         })
    //         s.refresh();
    //         _.$('hide-ppl').textContent="Hide People";

    //     }
    // }

    // Clear side panel
    function clearPanel(){
        _.$('f1-label').textContent = "";
        _.$('f2-label').textContent = "";
        _.$('f3-label').textContent = "";
        _.$('f4-label').textContent = "";
        _.$('f5-label').textContent = "";
        _.$('field1').textContent="";
        _.$('field2').textContent="";
        _.$('field3').textContent="";
        _.$('field4').textContent="";
        _.$('field5').textContent="";    
    }

    // Update side panel when a node or edge is clicked
    function updatePanel(s){
        s.bind('clickNode', function(event) {
            clearPanel();
            if(event.data.node.neo4j_labels[0]=="Company"){
                _.$('f1-label').textContent = "Company Name:";
                _.$('f2-label').textContent = "Incorporation Year:";
                _.$('f3-label').textContent = "Sales(Rs in Cr):";
                _.$('f4-label').textContent = "Sector:";
                _.$('f5-label').textContent = "Business Group:";
                _.$('field1').textContent=event.data.node.label;
                _.$('field2').textContent=event.data.node.neo4j_data['incorporation_year'];
                _.$('field3').textContent=event.data.node.neo4j_data['sales'];
                _.$('field4').textContent=event.data.node.neo4j_data['sector'];
                _.$('field5').textContent=event.data.node.neo4j_data['bussiness_group'];
            }
            else if(event.data.node.neo4j_labels[0]=="Industry"){
                _.$('f1-label').textContent = "Industry Name:";
                _.$('field1').textContent=event.data.node.label;
            }
            else if(event.data.node.neo4j_labels[0]=="People"){
                _.$('f1-label').textContent = "Name:";
                _.$('field1').textContent=event.data.node.label;
            }
        });
        s.bind('clickEdge', function(event) {
            clearPanel();
            
            if(event.data.edge.neo4j_type=="INDUSTRY"){
                _.$('f1-label').textContent = "Relationship:";
                _.$('f2-label').textContent = "Company:";
                _.$('f3-label').textContent = "Industry:";
                _.$('field1').textContent="Company-Industry";
                _.$('field2').textContent=s.graph.nodes(event.data.edge.source).label;
                _.$('field3').textContent=s.graph.nodes(event.data.edge.target).label;
            }
            else if(event.data.edge.neo4j_type=="IS_SUBSIDIARY_OF"){
                _.$('f1-label').textContent = "Relationship:";
                _.$('f2-label').textContent = "Owner:";
                _.$('f3-label').textContent = "Subsidiary:";
                _.$('f4-label').textContent = "% Holding:";
                _.$('f5-label').textContent = "Shares Count:";
                _.$('field1').textContent="Subsidiary";
                _.$('field2').textContent=s.graph.nodes(event.data.edge.target).label;
                _.$('field3').textContent=s.graph.nodes(event.data.edge.source).label;
                _.$('field4').textContent=event.data.edge.neo4j_data['percent_holding'];
                _.$('field5').textContent=event.data.edge.neo4j_data['shares_count'];
            }
            else if(event.data.edge.neo4j_type=="MANAGES"){
                _.$('f1-label').textContent = "Relationship:";
                _.$('f2-label').textContent = "Company:";
                _.$('f3-label').textContent = "Person:";
                _.$('f4-label').textContent = "Year:";
                _.$('f5-label').textContent = "Designation:";
                _.$('field1').textContent="Management";
                _.$('field2').textContent=s.graph.nodes(event.data.edge.target).label;
                _.$('field3').textContent=s.graph.nodes(event.data.edge.source).label;
                if(event.data.edge.neo4j_data['reverse']==true){
                _.$('field2').textContent=s.graph.nodes(event.data.edge.source).label;
                _.$('field3').textContent=s.graph.nodes(event.data.edge.target).label;

                }
                _.$('field4').textContent=event.data.edge.neo4j_data['year'];
                _.$('field5').textContent=event.data.edge.neo4j_data['designation'];
            }
            else if(event.data.edge.neo4j_type=="IS_BANK_OF"){
                _.$('f1-label').textContent = "Relationship:";
                _.$('f2-label').textContent = "Company:";
                _.$('f3-label').textContent = "Bank:";
                _.$('field1').textContent="Company - Bank";
                _.$('field2').textContent=s.graph.nodes(event.data.edge.target).label;
                _.$('field3').textContent=s.graph.nodes(event.data.edge.source).label;
            }
            else if(event.data.edge.neo4j_type=="INVESTED_IN"){
                _.$('f1-label').textContent = "Relationship:";
                _.$('f2-label').textContent = "Investor:";
                _.$('f3-label').textContent = "Investee:";
                _.$('f4-label').textContent = "Shares Count:";
                _.$('f5-label').textContent = "Investment Cost(Rs in Cr):";
                _.$('field1').textContent="Investor - Investee";
                _.$('field2').textContent=s.graph.nodes(event.data.edge.source).label;
                _.$('field3').textContent=s.graph.nodes(event.data.edge.target).label;
                _.$('field4').textContent=event.data.edge.neo4j_data['equity_shares_count'];
                _.$('field5').textContent=event.data.edge.neo4j_data['investments_cost'];
            }
            else if(event.data.edge.neo4j_type=="IS_COLLABORATOR_OF"){
                _.$('f1-label').textContent = "Relationship:";
                _.$('f2-label').textContent = "Company:";
                _.$('f3-label').textContent = "Collaborator:";
                _.$('f4-label').textContent = "% Shares:";
                _.$('field1').textContent="Collaboration";
                _.$('field2').textContent=s.graph.nodes(event.data.edge.target).label;
                _.$('field3').textContent=s.graph.nodes(event.data.edge.source).label;
                _.$('field4').textContent=event.data.edge.neo4j_data['percent_shares'];
            }
            else if(event.data.edge.neo4j_type=="HOLDS_FUND_IN"){
                _.$('f1-label').textContent = "Relationship:";
                _.$('f2-label').textContent = "Company:";
                _.$('f3-label').textContent = "Fund:";
                _.$('f4-label').textContent = "% Holding:";
                _.$('f5-label').textContent = "Shares Count:";
                _.$('field1').textContent="Company - Fund";
                _.$('field2').textContent=s.graph.nodes(event.data.edge.target).label;
                _.$('field3').textContent=s.graph.nodes(event.data.edge.source).label;
                _.$('field4').textContent=event.data.edge.neo4j_data['percent_holding'];
                _.$('field5').textContent=event.data.edge.neo4j_data['shares_count'];
            }
            else if(event.data.edge.neo4j_type=="FUNDS_INDUSTRY"){
                _.$('f1-label').textContent = "Relationship:";
                _.$('f2-label').textContent = "Industry:";
                _.$('f3-label').textContent = "Fund:";
                _.$('f4-label').textContent = "Market Value:";
                _.$('f5-label').textContent = "Shares Count:";
                _.$('field1').textContent="Industry - Fund";
                _.$('field2').textContent=s.graph.nodes(event.data.edge.target).label;
                _.$('field3').textContent=s.graph.nodes(event.data.edge.source).label;
                _.$('field4').textContent=event.data.edge.neo4j_data['market_value'];
                _.$('field5').textContent=event.data.edge.neo4j_data['shares_count'];
            }



        });
    }

    // Customization function for the subgraph obtained
     function customiseGraph(s) {
        console.log(topcomps[0]);
        console.log("Nodes "+ s.graph.nodes().length+ " Edges "+ s.graph.edges().length);
        var alias ={};
        var orig =[];
        var pplComps ={};
        var eid=0;
        var comInd ={}, comCom={};
        // Iterate over each node and set its properties to highlight important information
        s.graph.nodes().forEach(function(n) {
            n.label = n.neo4j_data['name'];
            // console.log(n.label);
            n.level = 3;
            n.type = 'square';
            n.size = s.graph.degree(n.id)+5;
            if (n.neo4j_labels[0] == 'Company') {
                if(topcomps.indexOf(n.label)<0 ){
                    console.log(n.label)
                    s.graph.dropNode(n.id);
                }
                else{

                    comInd[n.label]=0;
                    comCom[n.id]={name: n.label}  ;
                    n.size = parseFloat(n.neo4j_data['sales'])/40000 +5;
                    n.color = '#BB0000';
                    n.image = {url:'img/cmpny.png',
                                scale:0.8};
                    ss = n.neo4j_data['sales'];
                    if(ss in salesvalmap){
                        if(n.label.length > salesvalmap[ss].label.length ) salesvalmap[ss] = n;
                    }
                    else{
                        salesvalmap[ss] = n;
                    }
                }
            }   
            if (n.neo4j_labels[0] == 'People') {
                if(s.graph.degree(n.id)<2){
                    s.graph.dropNode(n.id);
                }
                else{

                pplComps[n.label] = [];
                n.size = 2*s.graph.degree(n.id)+5;
                    n.image = { url:'img/ppl.png',
                                scale:0.8};
                    n.color = '#00BB00';
                }
            }
            if (n.neo4j_labels[0] == 'Industry') {
                n.image = { url:'img/ind.png',
                            scale: 0.8};
                s.graph.dropNode(n.id);
                n.color = '#0000BB';
            }   
        });
        
        s.graph.edges().forEach(function(e){
            // console.log(e);
            var src = s.graph.nodes(e.source);
            var trgt = s.graph.nodes(e.target);
            if(src.neo4j_type == "Company"){
                if(salesvalmap[src.neo4j_data['sales']].label != src.label){
                    e.source = salesvalmap[src.neo4j_data['sales']].id;
                }
            }
            if(trgt.neo4j_type == "Company"){
                if(salesvalmap[trgt.neo4j_data['sales']].label != trgt.label){
                    e.target = salesvalmap[trgt.neo4j_data['sales']].id;
                }
            }
        });
        //remove duplicates
        s.graph.nodes().forEach(function(n){
            if(n.neo4j_labels[0]=="Company"){
                if(salesvalmap[n.neo4j_data['sales']].label != n.label){
                    s.graph.dropNode(n.id);
                }
            }
        });

        // Refresh sigma instance
        s.refresh();

        // Iterate over each edge and set its properties
        s.graph.edges().forEach(function(e){
            e.hover_color = '#000'
            e.neo4j_data['reverse']=false;
            if(e.neo4j_type=='INDUSTRY'){
                name = s.graph.nodes(e.source).label;
                e.color = "#123456";
                if(comInd[name]==1){
                    s.graph.dropEdge(e.id);
                }    
                else{
                    comInd[name]=1;
                }
            }
            if(e.neo4j_type=='IS_BANK_OF'){
                e.color = "#234567";
                s.graph.dropEdge(e.id);                
            }
            if(e.neo4j_type=='IS_COLLABORATOR_OF'){
                e.color = "#345678";                
            }
            if(e.neo4j_type=='FUNDS_INDUSTRY'){
                e.color = "#456789";                
            }
            if(e.neo4j_type=='HOLDS_FUND_IN'){
                e.color = "#567890";                
            }
            if(e.neo4j_type=='INVESTED_IN'){
                e.color = "#00aaee";
                // console.log(e.source + ", " + e.target);
            }
            if(e.neo4j_type=='IS_SUBSIDIARY_OF'){
                e.color = "#FF5733";                
            }
            if(e.neo4j_type=='MANAGES'){
                e.color = "#ace111";
                if(e.neo4j_data['designation'] =="Auditor"){
                    s.graph.dropEdge(e.id);
                }
                else{
                    name = s.graph.nodes(e.source).label;
                    pplComps[name].push(e.target);
                }
                e.hidden=true;
            }
        }); 
        //drop people nodes
        s.graph.nodes().forEach(function(n){
            if(n.neo4j_labels[0]=="People"){
                // n.hidden=true;
                s.graph.dropNode(n.id);
            }
        })

        // console.log(comCom);
        //create people edges, from list of companies managed by each person
        for(var i in pplComps){
            ppl = pplComps[i];
            for (var j = 0; j < ppl.length; j++) {
                for (var k = j+1; k < ppl.length; k++) {
                    // c1 = s.graph.nodes()

                    // if(ppl[i]!=ppl[j]){
                    
                    if(ppl[k]!=ppl[j]){

                        if((comCom[ppl[j]][ppl[k]] === undefined)){
                            s.graph.addEdge({
                                id: 'Dummy'+(eid),
                                source: ppl[j],
                                target: ppl[k],
                                neo4j_type: "Dummy",
                                num:1,
                                color: "#234567"
                            })

                            comCom[ppl[j]][ppl[k]] ='Dummy'+eid;
                            comCom[ppl[k]][ppl[j]] ='Dummy'+eid;
                            eid++;
                            
                        }

                        else{
                            ee = comCom[ppl[j]][ppl[k]];
                            // console.log(ee);
                            e = s.graph.edges(ee);
                            e.num++  
                            e.size = e.num; 
                        }
                    }
                }
            }
        }


        // Refresh sigma instance
        s.refresh();
        // sigma.canvas.edges.autoCurve(s); 
        
        // Initialize FruchterManReingold layout
        var frListener = sigma.layouts.fruchtermanReingold.configure(s, {
            iterations: 700,
            easing: 'quadraticInOut',
            duration: 800
        });

        // Bind the events:
        frListener.bind('start stop interpolate', function(e) {
            console.log(e.type);
        });

        // Start the Fruchterman-Reingold algorithm:
        sigma.layouts.fruchtermanReingold.start(s);

        var activeState = sigma.plugins.activeState(s);

        // Initialize the dragNodes plugin:
        var dragListener = sigma.plugins.dragNodes(s, s.renderers[0], activeState);

        // Initialize the Select plugin:
        var select = sigma.plugins.select(s, activeState);

        // Initialize the Keyboard plugin:
        var keyboard = sigma.plugins.keyboard(s, s.renderers[0]);

        // Bind the Keyboard plugin to the Select plugin:
        select.bindKeyboard(keyboard);

        updatePanel(s);
        console.log("finished customise graph");

    }   

    // Neo4j database authentication, cypher query to obtain relevant subgraph, sigma instance to store subgraph, and callback function to customize subgraph obtained
    sigma.neo4j.cypher(
        { url: 'http://localhost:7474', user: 'neo4j', password: 'btp' },
        'match (n:Company) where (n.sales <> "NA") with n order by toFloat(n.sales) desc with collect (n) as comps unwind comps[0..'+numPpl+'] as c1 optional match (i)-[r1:INDUSTRY]-(c1) optional match (c1)-[r2:IS_SUBSIDIARY_OF]-(c2) where c2.sales <> "NA" return c1,c2,i,r1,r2',
        s,
        customiseGraph
    );
    //queries for different radio buttons
    function submitForm(){
        if(document.getElementById('sub').checked){
            console.log("----------------clicked sub------------------");
            s.graph.clear();
            sigma.neo4j.cypher(
                { url: 'http://localhost:7474', user: 'neo4j', password: 'btp' },
                'match (n:Company) where (n.sales <> "NA") with n order by toFloat(n.sales) desc with collect (n) as comps unwind comps[0..'+numPpl+'] as c1 optional match (i)-[r1:INDUSTRY]-(c1) optional match (c1)-[r2:IS_SUBSIDIARY_OF]-(c2) where c2.sales <> "NA" return c1,c2,i,r1,r2',
                s,
                customiseGraph
            );
        }
        else if(document.getElementById('sub_i').checked){
            console.log("----------------clicked sub_i------------------");
            s.graph.clear();
            sigma.neo4j.cypher(
                { url: 'http://localhost:7474', user: 'neo4j', password: 'btp' },
                'match (n:Company) where (n.sales <> "NA") with n order by toFloat(n.sales) desc with collect (n) as comps unwind comps[0..'+numPpl+'] as c1 optional match (i)-[r1:INDUSTRY]-(c1) optional match (c1)-[r2:IS_SUBSIDIARY_OF|INVESTED_IN]-(c2) where c2.sales <> "NA" return c1,c2,i,r1,r2',
                s,
                customiseGraph
            );
        }
        else if(document.getElementById('sub_p').checked){
            console.log("----------------clicked sub_p------------------");
            s.graph.clear();
            sigma.neo4j.cypher(
                { url: 'http://localhost:7474', user: 'neo4j', password: 'btp' },
                'match (n:Company) where (n.sales <> "NA") with n order by toFloat(n.sales) desc with collect (n) as comps unwind comps[0..'+numPpl+'] as c1 optional match (i)-[r1:INDUSTRY]-(c1) optional match (c1)-[r2:MANAGES]-(p:People) where r2.designation <> "Auditor" optional match (c1)-[r4:IS_SUBSIDIARY_OF]-(c2)  where c2.sales <> "NA" return c1,c2,i,r1,r2,p,r4',
                s,
                customiseGraph
            );
        }
        else if(document.getElementById('sub_i_p').checked){
            console.log("----------------clicked sub_i_p------------------");
            s.graph.clear();
            sigma.neo4j.cypher(
                { url: 'http://localhost:7474', user: 'neo4j', password: 'btp' },
                'match (n:Company) where (n.sales <> "NA") with n order by toFloat(n.sales) desc with collect (n) as comps unwind comps[0..'+numPpl+'] as c1 optional match (i)-[r1:INDUSTRY]-(c1) optional match (c1)-[r2:MANAGES]-(p:People) where r2.designation <> "Auditor" optional match (c1)-[r4:IS_SUBSIDIARY_OF|INVESTED_IN]-(c2) where c2.sales <> "NA" return c1,c2,i,r1,r2,p,r4',
                s,
                customiseGraph
            );
        }
    }


    // Export subgraph as JSON
    document.getElementById("btn").onclick=function(){
        s.toJSON({
          download: true,
            pretty: true,
          filename: 'company_industry.json'
        });
    }

</script>
